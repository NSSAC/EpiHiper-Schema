{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Traits",
  "description": "A schema for a list of traits containing enumerable features.",
  "type": "object",
  "required": ["traits"],
  "properties": {
    "traits": {
      "description": "The traits array.",
      "type": "array",
      "items": {
        "allOf": [
          {"$ref": "https://raw.githubusercontent.com/NSSAC/EpiHiper-Schema/master/schema/typeRegistry.json#/definitions/annotation"},
          {
            "description": "A trait",
            "type": "object",
            "required": [
              "id",
              "features"
            ],
            "properties": {
              "id": {"$ref": "https://raw.githubusercontent.com/NSSAC/EpiHiper-Schema/master/schema/typeRegistry.json#/definitions/uniqueId"},
              "features": {
                "description": "A list of features included in the trait",
                "type": "array",
                "items": {
                  "allOf": [
                    {"$ref": "https://raw.githubusercontent.com/NSSAC/EpiHiper-Schema/master/schema/typeRegistry.json#/definitions/annotation"},
                    {
                      "type": "object",
                      "required": [
                        "id",
                        "enums",
                        "default"
                      ],
                      "properties": {
                        "id": {"$ref": "https://raw.githubusercontent.com/NSSAC/EpiHiper-Schema/master/schema/typeRegistry.json#/definitions/uniqueId"},
                        "enums": {
                          "description": "The enumeration values allowed for the feature",
                          "type": "array",
                          "items": {
                            "allOf": [
                              {"$ref": "https://raw.githubusercontent.com/NSSAC/EpiHiper-Schema/master/schema/typeRegistry.json#/definitions/annotation"},
                              {
                                "description": "An enumeration value",
                                "type": "object",
                                "required": ["id"],
                                "properties": {
                                  "id": {"$ref": "https://raw.githubusercontent.com/NSSAC/EpiHiper-Schema/master/schema/typeRegistry.json#/definitions/uniqueId"}
                                },
                                "patternProperties": {
                                  "^ann:": {}
                                },
                                "additionalProperties": false
                              }
                            ]
                          }
                        },
                        "default": {"$ref": "https://raw.githubusercontent.com/NSSAC/EpiHiper-Schema/master/schema/typeRegistry.json#/definitions/uniqueIdRef"}
                      },
                      "patternProperties": {
                        "^ann:": {}
                      },
                      "additionalProperties": false
                    }
                  ]
                }
              }
            },
            "patternProperties": {
              "^ann:": {}
            },
            "additionalProperties": false
          }
        ]
      }
    }
  }
}